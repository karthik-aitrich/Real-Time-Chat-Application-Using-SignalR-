<div class="d-flex flex-column vh-100">

  <!-- HEADER -->
  <div class="border-bottom bg-white px-3 py-2 d-flex justify-content-between align-items-center">
    <h6 class="mb-0">{{ selectedName || 'Select a chat' }}</h6>
    <small class="text-muted">Offline</small>
  </div>

  <!-- MESSAGES -->
  <div #chatBody class="flex-grow-1 overflow-auto p-3 bg-light">

  <div *ngIf="isLoading === true" class="text-center text-muted">
    Loading messages...
  </div>


<!-- <div *ngFor="let msg of messages">
  ...
</div> -->


    <ng-container *ngIf="isLoading === false">
    <div *ngFor="let msg of messages"
         class="mb-2 d-flex"
         [ngClass]="msg.senderId === senderId ? 'justify-content-end' : 'justify-content-start'">

      <div class="px-3 py-2 rounded"
           [ngClass]="msg.senderId === senderId ? 'bg-success text-white' : 'bg-white border'">

        <small class="text-muted d-block text-end">
          {{ msg.sentAt | date:'shortTime' }}
        </small>

        {{ msg.messageText }}

        <span class="status ms-2">
          <ng-container [ngSwitch]="msg.status">
            <span *ngSwitchCase="0">✔</span>
            <span *ngSwitchCase="1">✔✔</span>
            <span *ngSwitchCase="2">✔✔</span>
          </ng-container>
        </span>

      </div>
    </div>
  </ng-container>

</div>

  <!-- INPUT -->
  <div class="border-top bg-white p-3">
    <div class="input-group">
      <input type="text"
             class="form-control"
             placeholder="Type a message..."
             [(ngModel)]="message" />

      <button class="btn btn-success" (click)="send()">Send</button>
    </div>
  </div>

</div>
